{% extends 'base.html' %}

{% block title %}ãƒ•ãƒ¬ãƒ³ãƒ‰ - Moon Tasker{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto space-y-6">
    <h1 class="text-3xl font-bold bg-gradient-to-r from-green-400 to-cyan-400 bg-clip-text text-transparent">
        ãƒ•ãƒ¬ãƒ³ãƒ‰ ğŸ‘¥
    </h1>

    {% if is_logged_in %}
    <!-- ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ -->

    <!-- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« -->
    <div class="glass-card p-6">
        <h2 class="text-lg font-bold mb-4">ğŸ‘¤ ã‚ãªãŸã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h2>

        {% if user_profile %}
        <div class="flex items-center gap-4">
            <div
                class="w-16 h-16 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-3xl shadow-lg">
                ğŸ‘¤
            </div>
            <div>
                <p class="font-bold text-lg">{{ user_profile.display_name or 'ãƒ¦ãƒ¼ã‚¶ãƒ¼' }}</p>
                <p class="text-gray-400 text-sm">ID: {{ user_profile.friend_code or 'æœªè¨­å®š' }}</p>
            </div>
        </div>
        {% else %}
        <p class="text-gray-400">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
        {% endif %}
    </div>

    <!-- ãƒ•ãƒ¬ãƒ³ãƒ‰ä¸€è¦§ -->
    <div class="glass-card p-6">
        <h2 class="text-lg font-bold mb-4">ğŸ‘¥ ãƒ•ãƒ¬ãƒ³ãƒ‰ä¸€è¦§</h2>

        {% if friends_list|length == 0 %}
        <div class="text-center py-8">
            <span class="text-5xl mb-4 block">ğŸ‘¥</span>
            <p class="text-gray-400">ã¾ã ãƒ•ãƒ¬ãƒ³ãƒ‰ãŒã„ã¾ã›ã‚“</p>
            <p class="text-gray-500 text-sm mt-2">ãƒ•ãƒ¬ãƒ³ãƒ‰ã‚³ãƒ¼ãƒ‰ã‚’å…±æœ‰ã—ã¦ãƒ•ãƒ¬ãƒ³ãƒ‰ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ï¼</p>
        </div>
        {% else %}
        <div class="space-y-3">
            {% for friend in friends_list %}
            <div class="flex items-center gap-4 bg-surface/50 rounded-xl p-4 border border-white/5">
                <div
                    class="w-12 h-12 bg-gradient-to-br from-cyan-400 to-blue-400 rounded-full flex items-center justify-center text-2xl">
                    ğŸ‘¤
                </div>
                <div class="flex-1">
                    <p class="font-bold">{{ friend.display_name or 'ãƒ•ãƒ¬ãƒ³ãƒ‰' }}</p>
                    <p class="text-gray-400 text-sm">ç´¯è¨ˆã‚¿ã‚¹ã‚¯: {{ friend.total_tasks or 0 }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <!-- ãƒ•ãƒ¬ãƒ³ãƒ‰è¿½åŠ  -->
    <div class="glass-card p-6">
        <h2 class="text-lg font-bold mb-4">â• ãƒ•ãƒ¬ãƒ³ãƒ‰ã‚’è¿½åŠ </h2>

        <form action="/friends/add" method="post" class="flex gap-4">
            <input type="text" name="friend_code" placeholder="ãƒ•ãƒ¬ãƒ³ãƒ‰ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›"
                class="flex-1 bg-surface border border-white/10 rounded-xl px-4 py-3 text-white">
            <button type="submit" class="btn-primary text-white font-bold py-3 px-6 rounded-xl">
                è¿½åŠ 
            </button>
        </form>
    </div>

    <!-- ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ -->
    <div class="text-center">
        <form action="/friends/logout" method="post">
            <button type="submit" class="text-gray-400 hover:text-white text-sm transition-colors">
                ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
            </button>
        </form>
    </div>

    {% else %}
    <!-- æœªãƒ­ã‚°ã‚¤ãƒ³ -->
    <div class="glass-card p-10 text-center">
        <span class="text-6xl block mb-4">ğŸ‘¥</span>
        <h2 class="text-2xl font-bold bg-gradient-to-r from-green-400 to-cyan-400 bg-clip-text text-transparent">
            ãƒ•ãƒ¬ãƒ³ãƒ‰æ©Ÿèƒ½ã‚’ä½¿ã†
        </h2>
        <p class="text-gray-400 mt-3">ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãƒ•ãƒ¬ãƒ³ãƒ‰ã¨é€²æ—ã‚’å…±æœ‰ã—ã¾ã—ã‚‡ã†ï¼</p>
    </div>

    <!-- ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ  -->
    <div class="glass-card p-6">
        <h2 class="text-lg font-bold mb-4">ğŸ” ãƒ­ã‚°ã‚¤ãƒ³</h2>

        <form action="/friends/login" method="post" class="space-y-4">
            <input type="email" name="email" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹" required
                class="w-full bg-surface border border-white/10 rounded-xl px-4 py-3 text-white">
            <input type="password" name="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" required
                class="w-full bg-surface border border-white/10 rounded-xl px-4 py-3 text-white">
            <button type="submit" class="w-full btn-primary text-white font-bold py-3 rounded-xl">
                ãƒ­ã‚°ã‚¤ãƒ³
            </button>
        </form>

        <div class="relative my-6">
            <div class="absolute inset-0 flex items-center">
                <div class="w-full border-t border-white/10"></div>
            </div>
            <div class="relative flex justify-center text-sm">
                <span class="px-4 bg-surface-card text-gray-400">ã¾ãŸã¯</span>
            </div>
        </div>

        <form action="/friends/signup" method="post" class="space-y-4">
            <input type="email" name="email" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹" required
                class="w-full bg-surface border border-white/10 rounded-xl px-4 py-3 text-white">
            <input type="password" name="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆ6æ–‡å­—ä»¥ä¸Šãƒ»è‹±æ•°æ··åˆï¼‰" required
                class="w-full bg-surface border border-white/10 rounded-xl px-4 py-3 text-white">
            <button type="submit"
                class="w-full bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-bold py-3 rounded-xl hover:shadow-lg hover:shadow-cyan-500/30 transition-all">
                æ–°è¦ç™»éŒ²
            </button>
        </form>
    </div>

    <!-- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ -->
    <div class="text-center">
        <a href="/" class="text-gray-400 hover:text-white text-sm transition-colors">
            â† ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ç¶šã‘ã‚‹
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}