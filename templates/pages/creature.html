{% extends 'base.html' %}

{% block title %}ç”Ÿå‘½ä½“ - Moon Tasker{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto space-y-6">
    <h1 class="text-3xl font-bold">ç”Ÿå‘½ä½“ ğŸ¾</h1>

    {% if creature %}
    <!-- ç”Ÿå‘½ä½“è¡¨ç¤º -->
    <div class="glass rounded-xl p-8 text-center border-2 
        {% if creature.mood >= 70 %}border-blue-400
        {% elif creature.mood >= 40 %}border-yellow-400
        {% elif creature.mood >= 20 %}border-orange-400
        {% else %}border-red-400{% endif %}">

        <p class="text-gray-400 text-sm mb-4">ã‚ãªãŸã®ç›¸æ£’</p>

        <!-- ç”Ÿå‘½ä½“ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ« -->
        <div class="text-8xl mb-4">{{ emoji }}</div>

        <h2 class="text-2xl font-bold">{{ creature.name }}</h2>
        <p class="text-gray-400">Lv.{{ creature.evolution_stage }}</p>

        <!-- æ„Ÿæƒ…è¡¨ç¤º -->
        {% if emotion %}
        <div class="bg-gray-700/50 rounded-lg px-6 py-3 mt-4 inline-block">
            <p class="text-lg">ã€Œ{{ emotion.speech }}ã€</p>
        </div>
        <p class="text-gray-400 text-sm italic mt-2">ï¼ˆ{{ emotion.desc }}ï¼‰</p>
        {% endif %}

        {% if warning %}
        <p class="text-red-400 font-bold mt-4">âš ï¸ {{ warning }}</p>
        {% endif %}

        <!-- æ©Ÿå«Œãƒ¡ãƒ¼ã‚¿ãƒ¼ -->
        <div class="mt-6">
            <p class="text-sm text-gray-400 mb-2">æ©Ÿå«Œ: {{ creature.mood }}%</p>
            <div class="w-full max-w-xs mx-auto bg-gray-700 rounded-full h-4">
                <div class="h-4 rounded-full transition-all duration-500
                    {% if creature.mood >= 70 %}bg-pink-400
                    {% elif creature.mood >= 40 %}bg-yellow-400
                    {% elif creature.mood >= 20 %}bg-orange-400
                    {% else %}bg-red-500{% endif %}" style="width: {{ creature.mood }}%"></div>
            </div>
        </div>

        <!-- çµŒé¨“å€¤ -->
        <div class="mt-4">
            <p class="text-sm text-gray-400 mb-2">çµŒé¨“å€¤: {{ creature.experience }}</p>
            <div class="w-full max-w-xs mx-auto bg-gray-700 rounded-full h-2">
                <div class="h-2 rounded-full bg-primary transition-all duration-500"
                    style="width: {{ (creature.experience % 100) }}%"></div>
            </div>
        </div>
    </div>

    <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è©³ç´° -->
    <div class="glass rounded-xl p-6">
        <h3 class="text-lg font-bold mb-4">ğŸ“Š ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</h3>

        <div class="grid grid-cols-2 gap-4">
            <div class="bg-gray-800/50 rounded-lg p-4 text-center">
                <p class="text-3xl font-bold text-primary">{{ creature.evolution_stage }}</p>
                <p class="text-gray-400 text-sm">é€²åŒ–æ®µéš</p>
            </div>
            <div class="bg-gray-800/50 rounded-lg p-4 text-center">
                <p class="text-3xl font-bold text-success">{{ creature.experience }}</p>
                <p class="text-gray-400 text-sm">ç´¯è¨ˆçµŒé¨“å€¤</p>
            </div>
        </div>
    </div>

    <!-- é€²åŒ–å±¥æ­´ -->
    {% if evolution_history|length > 0 %}
    <div class="glass rounded-xl p-6">
        <h3 class="text-lg font-bold mb-4">ğŸŒŸ é€²åŒ–å±¥æ­´</h3>

        <div class="flex justify-center gap-4">
            {% for stage in evolution_history %}
            <div class="text-center">
                <span class="text-3xl">{{ stage.emoji }}</span>
                <p class="text-xs text-gray-400 mt-1">{{ stage.name }}</p>
            </div>
            {% if not loop.last %}
            <span class="text-2xl text-gray-500 self-center">â†’</span>
            {% endif %}
            {% endfor %}
        </div>
    </div>
    {% endif %}

    {% else %}
    <!-- æ–°è¦è‚²æˆé–‹å§‹ -->
    <div class="glass rounded-xl p-8 text-center">
        <span class="text-8xl">ğŸ¥š</span>
        <h2 class="text-2xl font-bold mt-4">ç”Ÿå‘½ä½“ã‚’è‚²ã¦ã‚ˆã†ï¼</h2>
        <p class="text-gray-400 mt-2">ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã—ã¦çµŒé¨“å€¤ã‚’è²¯ã‚ã€ç”Ÿå‘½ä½“ã‚’é€²åŒ–ã•ã›ã¾ã—ã‚‡ã†</p>

        <form action="/creature/start" method="post" class="mt-6 space-y-4">
            <input type="text" name="name" placeholder="åå‰ã‚’å…¥åŠ›ï¼ˆä¾‹: ãƒ«ãƒŠï¼‰" value="ãƒ«ãƒŠ"
                class="w-full max-w-xs bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white text-center">

            <button type="submit"
                class="block mx-auto bg-primary hover:bg-primary/80 text-white font-bold py-3 px-8 rounded-lg">
                ğŸ¥š è‚²æˆé–‹å§‹
            </button>
        </form>
    </div>

    <!-- èª¬æ˜ -->
    <div class="glass rounded-xl p-6">
        <h3 class="text-lg font-bold mb-4">ğŸ’¡ è‚²æˆã®ãƒ’ãƒ³ãƒˆ</h3>
        <ul class="space-y-2 text-gray-300">
            <li>ğŸ¯ ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã™ã‚‹ã¨çµŒé¨“å€¤ãŒè²¯ã¾ã‚Šã¾ã™</li>
            <li>â±ï¸ é›£ã—ã„ã‚¿ã‚¹ã‚¯ã»ã©å¤šãã®çµŒé¨“å€¤ãŒã‚‚ã‚‰ãˆã¾ã™</li>
            <li>ğŸŒŸ çµŒé¨“å€¤ãŒä¸€å®šé‡ã«é”ã™ã‚‹ã¨é€²åŒ–ã—ã¾ã™</li>
            <li>ğŸ˜¢ é•·æ™‚é–“ã‚¿ã‚¹ã‚¯ã‚’ã—ãªã„ã¨æ©Ÿå«ŒãŒä¸‹ãŒã‚Šã¾ã™</li>
            <li>ğŸ æ™‚ã€…ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚’ãã‚Œã‚‹ã“ã¨ã‚‚ï¼</li>
        </ul>
    </div>
    {% endif %}
</div>
{% endblock %}