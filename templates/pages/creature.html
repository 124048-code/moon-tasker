{% extends 'base.html' %}

{% block title %}ç”Ÿå‘½ä½“ - Moon Tasker{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto space-y-6">
    <h1 class="text-3xl font-bold bg-gradient-to-r from-pink-400 to-purple-400 bg-clip-text text-transparent">
        ç”Ÿå‘½ä½“ ğŸ¾
    </h1>

    {% if creature %}
    <!-- ç”Ÿå‘½ä½“è¡¨ç¤º -->
    <div class="glass-card p-8 text-center border-2 
        {% if creature.mood >= 70 %}border-blue-400/50
        {% elif creature.mood >= 40 %}border-yellow-400/50
        {% elif creature.mood >= 20 %}border-orange-400/50
        {% else %}border-red-400/50{% endif %}">

        <p class="text-gray-400 text-sm mb-4">ã‚ãªãŸã®ç›¸æ£’</p>

        <!-- ç”Ÿå‘½ä½“ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ« -->
        <div class="text-8xl mb-4 animate-bounce">{{ emoji }}</div>

        <h2 class="text-2xl font-bold">{{ creature.name }}</h2>
        <p class="text-gray-400">Lv.{{ creature.evolution_stage }}</p>

        <!-- æ„Ÿæƒ…è¡¨ç¤º -->
        {% if emotion %}
        <div class="bg-surface/50 rounded-xl px-6 py-3 mt-4 inline-block border border-white/10">
            <p class="text-lg">ã€Œ{{ emotion.speech }}ã€</p>
        </div>
        <p class="text-gray-400 text-sm italic mt-2">ï¼ˆ{{ emotion.desc }}ï¼‰</p>
        {% endif %}

        {% if warning %}
        <p class="text-red-400 font-bold mt-4">âš ï¸ {{ warning }}</p>
        {% endif %}

        <!-- æ©Ÿå«Œãƒ¡ãƒ¼ã‚¿ãƒ¼ -->
        <div class="mt-8 max-w-md mx-auto">
            <div class="flex justify-between text-sm text-gray-400 mb-2">
                <span>æ©Ÿå«Œ</span>
                <span>{{ creature.mood }}%</span>
            </div>
            <div class="w-full bg-surface rounded-full h-4 overflow-hidden">
                <div class="h-4 rounded-full transition-all duration-500 progress-glow
                    {% if creature.mood >= 70 %}bg-gradient-to-r from-pink-400 to-pink-500
                    {% elif creature.mood >= 40 %}bg-gradient-to-r from-yellow-400 to-yellow-500
                    {% elif creature.mood >= 20 %}bg-gradient-to-r from-orange-400 to-orange-500
                    {% else %}bg-gradient-to-r from-red-500 to-red-600{% endif %}" style="width: {{ creature.mood }}%">
                </div>
            </div>
        </div>

        <!-- çµŒé¨“å€¤ -->
        <div class="mt-4 max-w-md mx-auto">
            <div class="flex justify-between text-sm text-gray-400 mb-2">
                <span>çµŒé¨“å€¤</span>
                <span>{{ creature.experience if creature.experience else 0 }}</span>
            </div>
            <div class="w-full bg-surface rounded-full h-2 overflow-hidden">
                <div class="h-2 rounded-full bg-gradient-to-r from-purple-400 to-purple-600 transition-all duration-500"
                    style="width: {{ ((creature.experience if creature.experience else 0) % 100) }}%"></div>
            </div>
        </div>
    </div>

    <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è©³ç´° -->
    <div class="grid grid-cols-2 gap-4">
        <div class="glass-card p-5 text-center">
            <p class="text-4xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                {{ creature.evolution_stage }}
            </p>
            <p class="text-gray-400 text-sm mt-1">é€²åŒ–æ®µéš</p>
        </div>
        <div class="glass-card p-5 text-center">
            <p class="text-4xl font-bold bg-gradient-to-r from-green-400 to-cyan-400 bg-clip-text text-transparent">
                {{ creature.experience if creature.experience else 0 }}
            </p>
            <p class="text-gray-400 text-sm mt-1">ç´¯è¨ˆçµŒé¨“å€¤</p>
        </div>
    </div>

    <!-- é€²åŒ–å±¥æ­´ -->
    {% if evolution_history|length > 0 %}
    <div class="glass-card p-6">
        <h3 class="text-lg font-bold mb-4">ğŸŒŸ é€²åŒ–ã®è»Œè·¡</h3>

        <div class="flex justify-center items-center gap-2 flex-wrap">
            {% for stage in evolution_history %}
            <div class="text-center p-3 bg-surface/50 rounded-xl border border-white/10">
                <span class="text-3xl">{{ stage.emoji }}</span>
                <p class="text-xs text-gray-400 mt-1">{{ stage.name }}</p>
            </div>
            {% if not loop.last %}
            <span class="text-2xl text-gray-500">â†’</span>
            {% endif %}
            {% endfor %}
        </div>
    </div>
    {% endif %}

    {% else %}
    <!-- æ–°è¦è‚²æˆé–‹å§‹ -->
    <div class="glass-card p-10 text-center">
        <span class="text-8xl block mb-4">ğŸ¥š</span>
        <h2 class="text-2xl font-bold bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent">
            ç”Ÿå‘½ä½“ã‚’è‚²ã¦ã‚ˆã†ï¼
        </h2>
        <p class="text-gray-400 mt-3">ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã—ã¦çµŒé¨“å€¤ã‚’è²¯ã‚ã€ç”Ÿå‘½ä½“ã‚’é€²åŒ–ã•ã›ã¾ã—ã‚‡ã†</p>

        <form action="/creature/start" method="post" class="mt-8 space-y-4">
            <input type="text" name="name" placeholder="åå‰ã‚’å…¥åŠ›ï¼ˆä¾‹: ãƒ«ãƒŠï¼‰" value="ãƒ«ãƒŠ"
                class="w-full max-w-xs bg-surface border border-white/10 rounded-xl px-4 py-3 text-white text-center">

            <button type="submit" class="block mx-auto btn-primary text-white font-bold py-3 px-8 rounded-xl">
                ğŸ¥š è‚²æˆé–‹å§‹
            </button>
        </form>
    </div>

    <!-- èª¬æ˜ -->
    <div class="glass-card p-6">
        <h3 class="text-lg font-bold mb-4">ğŸ’¡ è‚²æˆã®ãƒ’ãƒ³ãƒˆ</h3>
        <div class="space-y-3">
            <div class="flex items-start gap-3">
                <span class="text-xl">ğŸ¯</span>
                <p class="text-gray-300">ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã™ã‚‹ã¨çµŒé¨“å€¤ãŒè²¯ã¾ã‚Šã¾ã™</p>
            </div>
            <div class="flex items-start gap-3">
                <span class="text-xl">â±ï¸</span>
                <p class="text-gray-300">é›£ã—ã„ã‚¿ã‚¹ã‚¯ã»ã©å¤šãã®çµŒé¨“å€¤ãŒã‚‚ã‚‰ãˆã¾ã™</p>
            </div>
            <div class="flex items-start gap-3">
                <span class="text-xl">ğŸŒŸ</span>
                <p class="text-gray-300">çµŒé¨“å€¤ãŒä¸€å®šé‡ã«é”ã™ã‚‹ã¨é€²åŒ–ã—ã¾ã™</p>
            </div>
            <div class="flex items-start gap-3">
                <span class="text-xl">ğŸ˜¢</span>
                <p class="text-gray-300">é•·æ™‚é–“ã‚¿ã‚¹ã‚¯ã‚’ã—ãªã„ã¨æ©Ÿå«ŒãŒä¸‹ãŒã‚Šã¾ã™</p>
            </div>
            <div class="flex items-start gap-3">
                <span class="text-xl">ğŸ</span>
                <p class="text-gray-300">æ™‚ã€…ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚’ãã‚Œã‚‹ã“ã¨ã‚‚ï¼</p>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}