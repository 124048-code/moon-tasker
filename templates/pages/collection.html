{% extends 'base.html' %}

{% block title %}æ˜Ÿåº§å›³é‘‘ - Moon Tasker{% endblock %}

{% block content %}
<h1 class="page-title">æ˜Ÿåº§å›³é‘‘ â­</h1>
<p class="text-muted mb-6">ã‚¿ã‚¹ã‚¯ã‚’é”æˆã—ã¦ãƒãƒƒã‚¸ã‚’é›†ã‚ã‚ˆã†ï¼</p>

<!-- ç²å¾—æ¸ˆã¿ãƒãƒƒã‚¸ -->
<div class="card">
    <h2 class="section-title" style="color: #ffc107;">ğŸ† ç²å¾—æ¸ˆã¿ãƒãƒƒã‚¸</h2>

    {% if unlocked_badges|length == 0 %}
    <div class="text-center" style="padding: 32px;">
        <span style="font-size: 48px;">ğŸ”’</span>
        <p class="text-muted mt-4">ã¾ã ãƒãƒƒã‚¸ã‚’ç²å¾—ã—ã¦ã„ã¾ã›ã‚“</p>
        <p class="text-muted text-sm mt-2">ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã—ã¦ãƒãƒƒã‚¸ã‚’è§£é™¤ã—ã¾ã—ã‚‡ã†ï¼</p>
    </div>
    {% else %}
    <div class="badge-grid">
        {% for badge in unlocked_badges %}
        <div class="badge-card unlocked">
            <span class="badge-icon">â­</span>
            <p class="badge-name">{{ badge.name }}</p>
            <p class="badge-desc" style="color: #ffc107;">{{ badge.constellation_name }}</p>
            <p class="badge-desc">{{ badge.description }}</p>
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>

<!-- æœªç²å¾—ãƒãƒƒã‚¸ -->
<div class="card">
    <h2 class="section-title text-muted">ğŸ”’ æœªç²å¾—ãƒãƒƒã‚¸</h2>

    {% if locked_badges|length == 0 %}
    <div class="text-center" style="padding: 32px;">
        <span style="font-size: 48px;">ğŸ‰</span>
        <p style="color: #4caf50; font-weight: 600; margin-top: 16px;">ã™ã¹ã¦ã®ãƒãƒƒã‚¸ã‚’ç²å¾—ã—ã¾ã—ãŸï¼</p>
    </div>
    {% else %}
    <div class="badge-grid">
        {% for badge in locked_badges %}
        <div class="badge-card locked">
            <span class="badge-icon" style="filter: grayscale(1);">ğŸŒŸ</span>
            <p class="badge-name">{{ badge.name }}</p>
            <p class="badge-desc">{{ badge.constellation_name }}</p>
            <p class="badge-desc">{{ badge.description }}</p>
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>

<!-- é€²æ— -->
<div class="card text-center">
    <p
        style="font-size: 32px; font-weight: 700; background: linear-gradient(135deg, #ffc107, #ff9800); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
        {{ unlocked_badges|length }} / {{ unlocked_badges|length + locked_badges|length }}
    </p>
    <p class="text-muted mt-2">ãƒãƒƒã‚¸ç²å¾—æ¸ˆã¿</p>

    <div class="progress-bar mt-4" style="max-width: 400px; margin: 16px auto 0;">
        {% set total = unlocked_badges|length + locked_badges|length %}
        {% set percent = (unlocked_badges|length / total * 100) if total > 0 else 0 %}
        <div class="progress-bar-fill gold" style="width: {{ percent }}%;"></div>
    </div>
</div>
{% endblock %}